{
  "@context": {
    "schema": "https://schema.org/",
    "aaf": "https://aaf.dev/vocab#",
    "customer_email": "schema:email",
    "amount": "schema:price",
    "currency": "schema:priceCurrency",
    "memo": "schema:description"
  },
  "version": "0.1",
  "site": {
    "name": "Example Billing",
    "origin": "http://localhost:5173",
    "description": "A billing application for creating and managing invoices and workspace settings."
  },
  "actions": {
    "invoice.create": {
      "title": "Create invoice",
      "description": "Creates a new invoice for a customer with a specified amount, currency, and optional memo.",
      "scope": "invoices.write",
      "risk": "low",
      "confirmation": "review",
      "idempotent": false,
      "inputSchema": {
        "type": "object",
        "required": ["customer_email", "amount", "currency"],
        "properties": {
          "customer_email": { "type": "string", "format": "email" },
          "amount": { "type": "number", "minimum": 0 },
          "currency": { "type": "string", "enum": ["EUR", "USD"] },
          "memo": { "type": "string" }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": ["invoice_id", "status"],
        "properties": {
          "invoice_id": { "type": "string" },
          "status": { "type": "string", "enum": ["draft", "sent"] }
        }
      }
    },
    "invoice.list": {
      "title": "List invoices",
      "description": "Retrieves all invoices. Read-only, no side effects.",
      "scope": "invoices.read",
      "risk": "none",
      "confirmation": "never",
      "idempotent": true,
      "inputSchema": {
        "type": "object",
        "properties": {}
      },
      "outputSchema": {
        "type": "object",
        "required": ["invoices"],
        "properties": {
          "invoices": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": { "type": "string" },
                "customer_email": { "type": "string" },
                "amount": { "type": "number" },
                "currency": { "type": "string" },
                "status": { "type": "string" }
              }
            }
          }
        }
      }
    },
    "workspace.delete": {
      "title": "Delete workspace",
      "description": "Permanently deletes the workspace. This is irreversible and requires typing DELETE to confirm.",
      "scope": "workspace.delete",
      "risk": "high",
      "confirmation": "required",
      "idempotent": false,
      "inputSchema": {
        "type": "object",
        "required": ["delete_confirmation_text"],
        "properties": {
          "delete_confirmation_text": { "type": "string", "const": "DELETE" }
        }
      },
      "outputSchema": {
        "type": "object",
        "required": ["deleted"],
        "properties": {
          "deleted": { "type": "boolean" }
        }
      }
    }
  },
  "pages": {
    "/invoices/new": {
      "title": "Create Invoice",
      "description": "Form to create a new invoice with customer email, amount, currency, and memo.",
      "actions": ["invoice.create"]
    },
    "/invoices/": {
      "title": "Invoice List",
      "description": "Table listing all invoices with their status.",
      "actions": ["invoice.list"]
    },
    "/settings/": {
      "title": "Settings",
      "description": "Workspace settings including the dangerous delete operation.",
      "actions": ["workspace.delete"]
    }
  },
  "errors": {
    "UNAUTHORIZED": { "message": "User is not authorized for this action" },
    "VALIDATION_ERROR": { "message": "Input validation failed" },
    "CONFIRMATION_REQUIRED": { "message": "Action requires explicit confirmation" }
  }
}
